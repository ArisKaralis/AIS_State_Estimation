clc; clear; close all;

% Paths
dt = 1; T = 600;
sigma_pos = 15;

% === Simulate Vessel Motion ===
[x_true, time] = simulateTruth(T, dt);

% === Generate AIS Measurements ===
z_meas = generateAISMeas(x_true, sigma_pos);
[vx, vy, sog, cog] = deriveVelocityCOG(z_meas, dt);

% === Save as AIS-like CSV ===
filename = fullfile(data_path, 'synthetic_ais_segment.csv');
saveAISLog(filename, time, z_meas, vx, vy, sog, cog);

% === Plot for inspection ===
plotSimulatedTracks(x_true, z_meas);
